webpackJsonp([4],{312:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}function a(n){return function(){var e=n.apply(this,arguments);return new Promise(function(n,t){function i(a,s){try{var o=e[a](s),r=o.value}catch(d){return void t(d)}return o.done?void n(r):Promise.resolve(r).then(function(n){return i("next",n)},function(n){return i("throw",n)})}return i("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var s=t(300),o=i(s),r=t(313),d=i(r),c=t(314),u=i(c);t(315);var v=t(316),l=o["default"].extend({template:d["default"],init:function(){},ready:function(){$.init()},data:function(){return u["default"]},methods:{loadList:function(){var n=this;return a(regeneratorRuntime.mark(function e(){var t,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.$route.params.keyword,e.next=4,(0,v.searchLiveRoom)(t,n.page);case 4:if(i=e.sent,i&&0==i.errno){for(n.pandaList.total=i.data.total,setTimeout(function(){n.showAnimation=!1},i.data.items.length*n.stagger),n.showAnimation=!0,a=0;a<i.data.items.length;a+=1)n.pandaList.items.push(i.data.items[a]);n.page+=1}e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),$.toast("请求熊猫TV失败");case 11:case"end":return e.stop()}},e,n,[[0,8]])}))()}},computed:{isLoadOver:function(){return this.pandaList.items.length>=parseInt(this.pandaList.total)}},route:{data:function(n){n.to.params.keyword;this.loadList()},deactivate:function(n){this.pandaList={items:[],total:0},this.page=1,n.next()}}});e["default"]=l},313:function(n,e){n.exports='<div class="content panda">\n\n    <div class="row" style="margin: 0;">\n        <div class="col-50 video-box"\n             @click="goRoute(\'/video?url=\'+encodeURIComponent(\'http://m.panda.tv/room.html?roomid=\'+item.roomid),this)"\n             v-for="item in pandaList.items"\n             transition="video-box"\n             stagger="100">\n            <span class="video-tag video-tag-online">直播</span>\n            <div class="video-img">\n                <img :src.once="item.pictures.img">\n            </div>\n\n            <div class="video-title">\n               {{{item.name}}}\n            </div>\n            <div class="video-info">\n                <span class="video-nickname">{{item.nickname}}</span>\n                <span class="video-number">{{item.person_num}}</span>\n                <span class="video-cate">{{item.classification}}</span>\n            </div>\n        </div>\n\n        <template v-if="!showAnimation">\n            <div class="col-50 video-box" v-if="!isLoadOver"\n                 @click="loadList()">\n                <div class="video-img"></div>\n                <div class="load-more">加载更多</div>\n                <div class="video-title">\n                    &emsp;\n                </div>\n                <div class="video-info">\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                </div>\n            </div>\n            <div class="col-50 video-box" v-else>\n                <div class="video-img"></div>\n                <div class="load-more">没有更多了</div>\n                <div class="video-title">\n                    &emsp;\n                </div>\n                <div class="video-info">\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                    <span class="">&emsp;</span>\n                </div>\n            </div>\n        </template>\n    </div>\n</div>'},314:function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={date:(new Date).Format("yyyy-MM-dd"),pandaList:{items:[],total:0},page:1,showAnimation:!0,stagger:100};e["default"]=t},315:function(n,e){},316:function(n,e){"use strict";function t(n){return function(){var e=n.apply(this,arguments);return new Promise(function(n,t){function i(a,s){try{var o=e[a](s),r=o.value}catch(d){return void t(d)}return o.done?void n(r):Promise.resolve(r).then(function(n){return i("next",n)},function(n){return i("throw",n)})}return i("next")})}}Object.defineProperty(e,"__esModule",{value:!0});e.searchLiveRoom=function(){var n=t(regeneratorRuntime.mark(function e(n,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,i){$.ajax({type:"GET",url:"/panda/"+n+"?page="+t,success:function(n){e(n)},error:function(n){i("请求失败")}})}));case 1:case"end":return e.stop()}},e,this)}));return function(e,t){return n.apply(this,arguments)}}()}});
//# sourceMappingURL=4.5a6d5840.js.map